!function(){var u={optionUseCountForPieText:!1};function d(t,e,n,r){if(t.endAngle-t.startAngle==0)return"M 0 0";var l=e*Math.cos(t.startAngle),a=n*Math.sin(t.startAngle),o=e*Math.cos(t.endAngle),i=n*Math.sin(t.endAngle),c=[];return c.push("M",l,a,"A",e,n,"0",t.endAngle-t.startAngle>Math.PI?1:0,"1",o,i,"L",r*o,r*i),c.push("A",r*e,r*n,"0",t.endAngle-t.startAngle>Math.PI?1:0,"0",r*l,r*a,"z"),c.join(" ")}function h(t,e,n,r){var l=t.startAngle>Math.PI?Math.PI:t.startAngle,a=t.endAngle>Math.PI?Math.PI:t.endAngle,o=e*Math.cos(l),i=n*Math.sin(l),c=e*Math.cos(a),s=n*Math.sin(a),u=[];return u.push("M",o,r+i,"A",e,n,"0 0 1",c,r+s,"L",c,s,"A",e,n,"0 0 0",o,i,"z"),u.join(" ")}function p(t,e,n,r,l){var a=t.startAngle<Math.PI?Math.PI:t.startAngle,o=t.endAngle<Math.PI?Math.PI:t.endAngle,i=l*e*Math.cos(a),c=l*n*Math.sin(a),s=l*e*Math.cos(o),u=l*n*Math.sin(o),d=[];return d.push("M",i,c,"A",l*e,l*n,"0 0 1",s,u,"L",s,r+u,"A",l*e,l*n,"0 0 0",i,r+c,"z"),d.join(" ")}function A(t){return u.optionUseCountForPieText?0<t.data.count?t.data.count:"":.2<t.endAngle-t.startAngle?Math.round(1e3*(t.endAngle-t.startAngle)/(2*Math.PI))/10+"%":""}u.transition=function(t,e,n,r,l,a){var o=d3.layout.pie().sort(null).value(function(t){return t.value})(e);d3.select("#"+t).selectAll(".innerSlice").data(o).transition().duration(750).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return p(e(t),n+.5,r+.5,l,a)}}),d3.select("#"+t).selectAll(".topSlice").data(o).transition().duration(750).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return d(e(t),n,r,a)}}),d3.select("#"+t).selectAll(".outerSlice").data(o).transition().duration(750).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return h(e(t),n-.5,r-.5,l)}}),d3.select("#"+t).selectAll(".percent").data(o).transition().duration(750).attrTween("x",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return.6*n*Math.cos(.5*(e(t).startAngle+e(t).endAngle))}}).attrTween("y",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return.6*n*Math.sin(.5*(e(t).startAngle+e(t).endAngle))}}).text(A)},u.draw=function(t,e,n,r,l,a,o,i){u.centerX=n;var c=d3.layout.pie().sort(null).value(function(t){return t.value})(e),s=d3.select("#"+t).append("g").attr("transform","translate("+n+","+r+")").attr("class","slices");s.selectAll(".innerSlice").data(c).enter().append("path").attr("class","innerSlice").style("fill",function(t){return d3.hsl(t.data.color).darker(.7)}).attr("d",function(t){return p(t,l+.5,a+.5,o,i)}).each(function(t){this._current=t}),s.selectAll(".topSlice").data(c).enter().append("path").attr("class","topSlice").style("fill",function(t){return t.data.color}).style("stroke",function(t){return t.data.color}).attr("d",function(t){return d(t,l,a,i)}).each(function(t){this._current=t}),s.selectAll(".outerSlice").data(c).enter().append("path").attr("class","outerSlice").style("fill",function(t){return d3.hsl(t.data.color).darker(.7)}).attr("d",function(t){return h(t,l-.5,a-.5,o)}).each(function(t){this._current=t}),s.selectAll(".percent").data(c).enter().append("text").attr("class","percent").attr("x",function(t){return.6*l*Math.cos(.5*(t.startAngle+t.endAngle))}).attr("y",function(t){return.6*a*Math.sin(.5*(t.startAngle+t.endAngle))}).text(A).each(function(t){this._current=t}),s.selectAll(".innerSlice").on("mousemove",function(t){return f(t)}),s.selectAll(".innerSlice").on("mouseout",function(t){return g(t)}),s.selectAll(".topSlice").on("mousemove",function(t){return f(t)}),s.selectAll(".topSlice").on("mouseout",function(t){return g(t)}),s.selectAll(".outerSlice").on("mousemove",function(t){return f(t)}),s.selectAll(".outerSlice").on("mouseout",function(t){return g(t)})},this.Donut3D=u;var f=function(t){if(d3.select("#tooltip #line1").text(t.data.count+" classes with"),d3.select("#tooltip #line3").text(t.data.label+" "+EQ_SELECTED_CLASS_METRIC),d3.event.pageX>u.centerX){var e=d3.event.pageX-30,n=d3.event.pageY-10;d3.select("#tooltip").style("right",e+"px").style("top",n+"px").style("left",e-150+"px").style("width","150px")}else{e=d3.event.pageX+10,n=d3.event.pageY-10;d3.select("#tooltip").style("left",e+"px").style("top",n+"px").style("right",e+150+"px").style("width","150px")}d3.select("#tooltip").classed("hidden",!1)},g=function(t){d3.select("#tooltip").classed("hidden",!0)}}();
